<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Java工匠</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="专注Java后端">
<meta property="og:type" content="website">
<meta property="og:title" content="Java工匠">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Java工匠">
<meta property="og:description" content="专注Java后端">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java工匠">
<meta name="twitter:description" content="专注Java后端">
  
    <link rel="alternate" href="/atom.xml" title="Java工匠" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Java工匠</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">编码让世界变得更美好</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-项目Git-Maven化总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/25/项目Git-Maven化总结/" class="article-date">
  <time datetime="2016-11-25T13:55:28.000Z" itemprop="datePublished">2016-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/25/项目Git-Maven化总结/">项目Git+Maven化总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>公司原Java项目历史悠长，使用的版本管理为Svn，且尚未Maven化。为了后续提高开发效率，及持续集成，就和同事一起负责把项目进行Git+Maven化（个人负责Maven化）。期间也涉及到Java代码由GBK转UTF-8的过程（原项目混合GBK和UTF-8），统一了项目的编码。<br>实施过程如下（含Svn转Git）：</p>
<p>一. Svn转Git管理</p>
<pre><code>1.进入xxx项目根路径，删除隐藏文件.svn
    rm -rf .svn
2.git初始化管理
    git init
3.在gitLib中创建远程仓库
4.项目创建.gitignore文件，描述git管理忽略的文件
    .idea/
    .project
    *.iml
    target/
    .settings/
5.本地git项目关联远程仓库,至此Svn转Git结束
    git remote add origin https://xxx.gitlab.com/java/xxx.git
    git add .
    git commit -m &quot;项目初始化&quot;
    git push -u origin master               
</code></pre><p>二.Maven化（请保证外网与局域网的网络良好）</p>
<pre><code>1. 在项目根路径下创建pom.xml文件，用于添加项目依赖的jar
2. 在pom.xml中逐一添加jar引用：
    (a).在中央仓库：http://mvnrepository.com/或阿里Maven私服：http://maven.aliyun.com/nexus/根据jar名称搜索
    获得具体maven坐标，并拷贝到pom.xml中。如存不同组织相同名称的jar。可以使用以下命令查看jar内容，根据类路径进一步判断：
        jar -tf xxx.jar
    (b).如果项目引用的jar在中央仓库中未找到，需要把该jar手动上传到Nexus私服,然后再添加到pom.xml中。 
3.把现在WEB-INF下的lib目录移除到项目外
4.检查现在项目结构是否为标准Maven项目目录结构，如果不是创建目录，然后移动原目录或文件；
5.现在的项目进行构建，看是否能够编译成功：如编译失败可能jar依赖有遗留，添加后，反复执行，直至成功编译
6.检查项目中jar包是否存在版本依赖冲突，如存在使用exclusion进行排除冲突：
    mvn dependency:tree -Dverbose | grep &quot;omitted for conflict with&quot;
7.查看target中生成编译后的lib目录与项目外的lib是否相同，肉眼核实一遍，然后删除项目外的lib。
8.启动项目，随机验证项目功能是否可以正常使用，Maven化至此也完成：
    (a).项目首先使用的jetty尝试运行，发现jetty运行报web.xml中使用servlet的找不到，经检查确实不存在，而原来tomcat
    运行正常，可见tomcat对类的启动过程没有校验是否存在（具体机制后续学习）；
    (b).jetty启动后，发现布局乱掉，具体原因尚未找到。后转maven的tomcat插件运行，正常使用（经Fiddler抓包发现，有收到
    js，但在浏览器中查看为空---现未解决，留在在后面有时间处理）。
</code></pre><p>三. Java代码由GBK-&gt;UTF-8</p>
<pre><code>文件编码识别推荐以下两款开源软件（不保证百分百正确，需自己核实结果的正确性）：
    (a).juniversalchardet：https://github.com/thkoch2001/juniversalchardet
    (b).jchardet：http://jchardet.sourceforge.net/
以上识别的结果，再结合IDEA文件显示的编码进行验证确认。
</code></pre><p>四. 项目提测与团队推广</p>
<pre><code>1.项目代码申请全面回归测试
2.团队内推广Git+Maven+IDEA使用（见上篇Dubbo+Cat分布式服务搭建中可找到相关学习资料）。团队推广是发现各种奇葩问题：
    (a).推荐项目Maven在IDEA中的配置，使用maven安装路径conf的setting.xml,及当前用户下.m2本地库---部分同学工具编译
    正常，命令编译失败，由此造成
    (b).Windows安装JDK与Jre的安装比较独立，请格外注意，保证两者都要安装，Mac不需要关心Jre的问题
    (c).Window默认编码为GBK，Mac为UTF-8，而我们项目为UTF-8，如果在pom.xml中未指定编码可能某些类会在Windows编译不
    通过,Mac正常。---推荐设定编码
    (d).有的是IDEA问题：旧版本的IDEA可能需要额外配置参数（如Maven编码），新版本可以直接使用---推荐使用最新版本；
    (e).曾遇到某个类找不到竟然是jar冲突导致---推荐检查项目中jar包是否存在版本依赖冲突(如二.6所述，这一条是补加的)
    (f).Maven使用中总是报某个类找不到，后重装Maven竟然好了（太神奇了）
    (g).现公司网路实在太差了，有时在Maven编译时，总是下不到依赖的jar，只能手动一个个下载上传到本地私服。---强烈建议
    有个好的网络，珍惜生命
3.发现团队内用到的工具统一版本，很有必要，否则可能在我的机器正常，在你的机器上就运行不起来，现在约定了以下开发工具的使用
版本：
    JDK：1.7.0_79（想推荐Java8，考虑到影响范围广，暂不升级）
    IDEA：&gt;=2016.2
    Git：&gt;= 2.3.8
    Maven：3.3.9
</code></pre><p>参：</p>
<ol>
<li>中央仓库Web访问：<a href="http://mvnrepository.com/" target="_blank" rel="external">http://mvnrepository.com/</a></li>
<li>阿里Maven私服Web访问：<a href="http://maven.aliyun.com/nexus/" target="_blank" rel="external">http://maven.aliyun.com/nexus/</a></li>
<li>MavenFilteringException找不到：<a href="https://my.oschina.net/u/584441/blog/793356" target="_blank" rel="external">https://my.oschina.net/u/584441/blog/793356</a></li>
<li>Maven:Perhaps you are running on a JRE rather than a JDK：<a href="https://my.oschina.net/u/584441/blog/794562" target="_blank" rel="external">https://my.oschina.net/u/584441/blog/794562</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/25/项目Git-Maven化总结/" data-id="civxyoe090003thuywzpmi2cr" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础设施/">基础设施</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Dubbo+Cat分布式服务搭建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/16/Dubbo+Cat分布式服务搭建/" class="article-date">
  <time datetime="2016-11-16T11:41:03.000Z" itemprop="datePublished">2016-11-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/16/Dubbo+Cat分布式服务搭建/">Dubbo+Cat分布式服务搭建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>刚入职新公司，发现新公司的基础设施尚处于空白状态。同事也很想把自己原公司所使用的相关技术引入到现在的工作中。花费了大约1周的左右，把以下成功引入,搭建了一个会员服务框架,示例服务为exmaple-service：</p>
<pre><code>1.IDEA
2.Maven
3.Nexus（Maven私服）
4.Zookeeper
5.Dubbo
6.Cat
</code></pre><p>依赖环境：</p>
<pre><code>1.操作系统：Linux系统
2.JDK版本：1.7.0_79(强烈推荐使用该版本及以下版本，避免引起其他问题)
3.Git（部署的机器已安装）
4.Tomcat
5.请务必放开对各端口的访问权限（dubbo：20880，cat：2280，tomcat：8080，nexus：8081，zookeeper：2181/2182/2183，
mysql：3306）
6.强烈推荐部署为非root的用户
</code></pre><p>以下详细介绍下搭建的整个过程：</p>
<p>1.Git安装与使用在此不做过多描述，推荐看以下资料：</p>
<pre><code>1. 官方文档：http://git-scm.com/book/zh/v1
2. 廖雪峰的git教程：http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000
3. 快速指南：http://www.bootcss.com/p/git-guide/
</code></pre><p>2.IDEA开发工具的安装与使用在此也不做过多描述，推荐看以下资料：</p>
<pre><code>1. 官网：http://www.jetbrains.com/idea/
2. 教程：https://github.com/judasn/IntelliJ-IDEA-Tutorial
3. 推荐安装插件：.ignore,Lombok,File Info,CodeGlance
4. 正式使用前，请配置JDK，Maven，Git环境    
</code></pre><p>3.开发者本地Maven安装</p>
<pre><code>官网：http://maven.apache.org
中央仓库Web访问：http://mvnrepository.com
阿里国内仓库Web访问：http://maven.aliyun.com/nexus/
推荐阅读：《Maven实战》
安装过程如下：    
    1. 下载maven并解压到安装目录
    2. 配置环境变量
    3. 替换maven/conf/settings.xml,可参考settings.xml见：git@github.com:czwer/maven_config.git中的
    settings.xml，使用前修改IP地址（IP地址为稍后部署的Nexus私服地址，推荐原setttings.xml备份）
</code></pre><p>4.首先搭建Nexus私服</p>
<pre><code>Nexus私服作为公司内部仓库，依赖外部和公司内部编译的jar，都会发布到私服中。方便其他项目引用。
官网：http://nexus.sonatype.org/downloads/
安装步骤如下：    
    1.创建存放的目录
        mkdir -p /xxx/xxx/nexus
    2.下载nexus安装包：
        wget https://sonatype-download.global.ssl.fastly.net/nexus/oss/nexus-2.14.0-01-bundle.tar.gz
    3.解压：
        tar zxvf nexus-2.14.0-01-bundle.tar.gz -C /xxx/xxx/nexus
    4.切到nexus目录的bin下：
        cd /xxx/xxx/nexus/nexus-2.14.0-01/bin/
    5.启动/停止nexus(自带jetty,使用jetty启动)：
        启动：./nexus start
        停止：./nexus stop
    6.登录的初始账号密码：admin/admin123   
</code></pre><p>5.创建所有Maven工程的公共父pom.xml</p>
<pre><code>方便共同属性在所有项目共用以及构件发布的配置，参：git@github.com:czwer/maven_config.git中的pom.xml
  1.以下需修改：
       groupId
       artifactId
       name
       涉及到的IP
       JDK版本视公司环境不同自行修改
  2.修改完成后执行以下命令发布到私服(推荐把pom.xml放在新建的空文件夹中执行)：
       mvn deploy -N
  3.使用时，把以下放在项目根pom.xml：
        &lt;parent&gt;
            &lt;groupId&gt;com.xxx&lt;/groupId&gt;
            &lt;artifactId&gt;xxx-parent&lt;/artifactId&gt;
            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
        &lt;/parent&gt;
</code></pre><p>6.Zookeeper伪集群搭建（仅限开发测试环境部署）：</p>
<pre><code>ZooKeeper为分布式应用提供了高效且可靠的分布式协调服务，提供了诸如统一命名服务，配置管理和分布式锁等分布式的基础服务。
在这里我们因使用Dubbo作为分布式服务框架，而Dubbo需要注册中心，Zookeeper在这里担任的就是注册中心的角色。
官网：http://zookeeper.apache.org/
安装步骤如下：
    1.创建存放的目录
        mkdir -p /xxx/xxx/zookeeper
    2.下载安装包
        wget http://www.apache.org/dist/zookeeper/zookeeper-3.4.6/zookeeper-3.4.6.tar.gz
    3.解压：
        tar zxvf zookeeper-3.4.6.tar.gz -C /xxx/xxx/zookeeper
    4.创建快照文件的目录：
        mkdir -p /xxx/xxx/zookeeper/data/zk1
        mkdir -p /xxx/xxx/zookeeper/data/zk2
        mkdir -p /xxx/xxx/zookeeper/data/zk3
    5.创建myid文件
        echo &quot;1&quot; &gt; /xxx/xxx/zookeeper/data/zk1/myid
        echo &quot;2&quot; &gt; /xxx/xxx/zookeeper/data/zk2/myid
        echo &quot;3&quot; &gt; /xxx/xxx/zookeeper/data/zk3/myid
    6.修改配置文件/xxx/xxx/zookeeper/zookeeper-3.4.6/conf
        cp zoo_sample.cfg zoo1.cfg
        cp zoo_sample.cfg zoo2.cfg
        cp zoo_sample.cfg zoo3.cfg
        修改zoo1.cfg：
            dataDir=/xxx/xxx/zookeeper/data/zk1
            dataLogDir=/xxx/xxx/logs/zookeeper/zk1
            clientPort=2181
            server.1=localhost:2888:3888
            server.2=localhost:2889:3889
            server.3=localhost:2890:3890
        修改zoo2.cfg：
            dataDir=/xxx/xxx/zookeeper/data/zk2
            dataLogDir=/xxx/xxx/logs/zookeeper/zk2
            clientPort=2182
            server.1=localhost:2888:3888
            server.2=localhost:2889:3889
            server.3=localhost:2890:3890
        修改zoo3.cfg：
            dataDir=/xxx/xxx/zookeeper/data/zk3
            dataLogDir=/xxx/xxx/logs/zookeeper/zk3
            clientPort=2183
            server.1=localhost:2888:3888
            server.2=localhost:2889:3889
            server.3=localhost:2890:3890
    7.启动与停止
        启动：
            ./zkServer.sh  start /xxx/xxx/zookeeper/zookeeper-3.4.6/conf/zoo1.cfg
            ./zkServer.sh  start /xxx/xxx/zookeeper/zookeeper-3.4.6/conf/zoo2.cfg
            ./zkServer.sh  start /xxx/xxx/zookeeper/zookeeper-3.4.6/conf/zoo3.cfg
        停止：
            ./zkServer.sh stop /xxx/xxx/zookeeper/zookeeper-3.4.6/conf/zoo1.cfg
            ./zkServer.sh stop /xxx/xxx/zookeeper/zookeeper-3.4.6/conf/zoo2.cfg
            ./zkServer.sh stop /xxx/xxx/zookeeper/zookeeper-3.4.6/conf/zoo3.cfg

    8.验证是否部署成功
        telnet xxx.xxx.xxx.xxx 2181
        telnet xxx.xxx.xxx.xxx 2182
        telnet xxx.xxx.xxx.xxx 2183
</code></pre><p>7.部署Tomcat</p>
<pre><code>官网：http://tomcat.apache.org/
安装过程如下：
    1.创建安装目录
        mkdir -p /xxx/xxx/tomcat
    2.获取tomcat安装包
        wget http://mirrors.hust.edu.cn/apache/tomcat/tomcat-7/v7.0.73/bin/apache-tomcat-7.0.73.tar.gz
    3.解压：
        tar zxvf apache-tomcat-7.0.73.tar.gz -C /xxx/xxx/tomcat
</code></pre><p>8.Dubbo服务治理中心搭建</p>
<pre><code>官网：http://dubbo.io/
源代码：https://github.com/alibaba/dubbo
安装过程如下：
    1.下载dubbo源代码到开发者机器上
        git clone https://github.com/alibaba/dubbo.git
    2.编译源代码并打war包（强烈推荐JDK1.7环境），编译需要花些时间，
    要有耐心耐心（可以把本地settings.xml临时修改为指向：http://maven.aliyun.com/nexus以节省时间）：
        mvn eclipse:eclipse
        mvn clean install -Dmaven.test.skip
    3.在部署的服务器上创建dubbo部署目录：
        mkdir -p /xxx/xxx/dubbo-admin
    4.上传代码dubbo-admin到服务器上：
        sftp -oPort=22 abc@xxx.xxx.xxx.xxx
        输入密码：xxxxxx
        put /xxx/dubbo/dubbo-admin/target/dubbo-admin-2.5.4-SNAPSHOT.war /xxx/xxx/dubbo-admin
    5.解压并删除原war包
        jar -xvf dubbo-admin-2.5.4-SNAPSHOT.war
        mv dubbo-admin-2.5.4-SNAPSHOT.war /xxx/xxx/temp/
    6.修改配置文件dubbo-admin/WEB-INF/dubbo.properties(其中xxx.xxx.xxx.xxx为zookeeper部署地址)：
        dubbo.registry.address=zookeeper://xxx.xxx.xxx.xxx:2181?backup= xxx.xxx.xxx.xxx:2182, 
        xxx.xxx.xxx.xxx:2183
    7.修改日志位置:/xxx/xxx/dubbo-admin/WEB-INF/log4j.xml
        &lt;param name=&quot;file&quot; value=&quot;/xxx/xxx/logs/dubbo/admin/dubbo-governance.log&quot; /&gt;
    8.部署到tomcat中，添加配置，在/xxx/xxx/tomcat/apache-tomcat-7.0.72/conf/server.xml的&lt;Host&gt;中添加：
        &lt;Context path=&quot;/dubboAdmin&quot;
          docBase=&quot;/xxx/xxx/dubbo-admin/&quot;
          crossContext=&quot;true&quot;
          reloadable=&quot;false&quot;
          debug=&quot;0&quot;/&gt;
    9.启动tomcat
    10.访问首页：
         访问地址：http://xxx.xxx.xxx.xxx:8080/dubboAdmin/index.html
         账号：root
         密码：root
</code></pre><p>9.Dubbo接入Cat</p>
<pre><code>接入的原理就是在Dubbo中接入Cat的Transaction。
具体步骤如下,代码参：git@github.com:czwer/dubbo.git中dubbo_cat版本：
    1.从clone的dubbo分支中创建新分支：
        git checkout -b dubbo_cat
    2.增加Cat依赖jar包,在dubbo根pom.xml和dubbo-rpc-api的pom.xml
        &lt;dependency&gt;
            &lt;groupId&gt;com.dianping.cat&lt;/groupId&gt;
            &lt;artifactId&gt;cat-core&lt;/artifactId&gt;
            &lt;version&gt;1.3.3&lt;/version&gt;
        &lt;/dependency&gt;
    3.代码导入IDEA，修改dubbo源代码，嵌入Cat的Transaction，以便收集统计信息。涉及到的类有，
    具体参：git@github.com:czwer/dubbo.git的dubbo_cat版本（是参考前公司架构师修改代码的方式）:
        a.AbstractInvoker
        b.AbstractProxyInvoker
    4.修改版本号(含子模块的版本号，通过IDEA全局替换.xml文件中的):
        2.5.4_cat-SNAPSHOT
    5.在dubbo根pom.xml添加：
        &lt;parent&gt;
            &lt;groupId&gt;com.xxx&lt;/groupId&gt;
            &lt;artifactId&gt;xxx-parent&lt;/artifactId&gt;
            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
        &lt;/parent&gt;
    6.发布到Nexus仓库中，以后其他项目就可以引用了,在根目录的dubbo子模块中执行:
        mvn deploy -N
</code></pre><p>10.Cat应用监控平台部署（支持集群，开发环境暂部署了一台）</p>
<pre><code>CAT基于Java开发的实时应用监控平台，包括实时应用监控，业务监控。
 源码：https://github.com/dianping/cat
 文档：源码中包含《Dianping Cat安装说明文档》
     1.下载源码：
         git clone https://github.com/dianping/cat.git
     2.编译源码（JDK1.7编译；如网络原因导致本地仓库获得不到中央仓库jar，可以选择手动上传）：
         git checkout mvn-repo
         cp -R * ~/.m2/repository
         git checkout master
         mv clean install -DskipTests
     3.在服务器上创建部署目录：
         mkdir -p /xxx/xxx/cat
     4.把本地编译的上传到服务器上：
         sftp -oPort=22 xxxx@xxx.xxx.xxx.xxx
         cd /xxx/xxx/cat
         put /xxx/cat/cat-/xxx/target/cat-alpha-1.3.6.war 
     5.解压并移除原来的war包：
         jar -xvf cat-alpha-1.3.6.war
     6.创建表和配置文件，以下为手动方式：
         a.拷贝cat源码下script中datasources.xml，client.xml,server.xml到/data/appdatas/cat
         b.数据库连接与密码：datasources.xml
         c.执行SQL(原sql注意检查是否都执行成功，原执行时发现字段类型不能有两个字段同时为timestamp)：Cat.sql
         d.修改server.xml(主要是修改IP与端口号,IP请不要携带http)
     7.部署到tomcat
         http://xxx.xxx.xxx.xxx:8080/cat/r
         账号：catadmin
         密码：catadmin
     8.修盖配置：
         选择 配置--&gt;全局警告配置--&gt;客户端路由
</code></pre><p>11.搭建example-service服务，接入Dubbo,Cat</p>
<pre><code>搭建的服务为maven工程，示例见:git@github.com:czwer/example-service.git.
步骤如下：
    1.IDEA中创建Maven项目
    2.引入dubbo的jar，版本为我们修改过后放在私服的（2.5.4_cat-SNAPSHOT），注意排除spring的间接依赖。
    3.引入cat的jar
    4.收集异常日志，在log4j.properties加入
        log4j.rootCategory=INFO,app,stdout,cat（新增cat）
        log4j.appender.cat=com.dianping.cat.log4j.CatAppender
    5.如需收集url调用情况，在web.xml中增加如下配置
        &lt;!-- cat filter--&gt;
            &lt;filter&gt;
                &lt;filter-name&gt;cat-filter&lt;/filter-name&gt;
                &lt;filter-class&gt;com.dianping.cat.servlet.CatFilter&lt;/filter-class&gt;
            &lt;/filter&gt;
            &lt;filter-mapping&gt;
                &lt;filter-name&gt;cat-filter&lt;/filter-name&gt;
                &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
                &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
                &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;
            &lt;/filter-mapping&gt;
    6.dao监控
        &lt;!-- 创建SqlSessionFactory，同时指定数据源 --&gt;
        &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
            &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
            &lt;property name=&quot;plugins&quot;&gt;
                &lt;array&gt;
                    &lt;bean class=&quot;com.example.dal.CatSelectInterceptor&quot;/&gt;
                &lt;/array&gt;
            &lt;/property&gt;
        &lt;/bean&gt;
    7.在publish工程的resources目录中加入META-INF文件，里面增加app.properties, 内容为app.name=应用名称(
    如exmaple-service)
    8.在应用所在的服务器中创建/data/appdatas/cat增加client.xml文件，里面配置cat-server的地址。具体配置指向服务器
    地址与端口。
</code></pre><p>以上感谢前公司的架构师（法师），给公司引入这么好的框架，以上经验大部分从他那里学习到的。也感谢部署期间泉兄提供的帮助。以上部署时也遇到了一些问题，通过网络最终解决，感谢分享经验的人。</p>
<p>参考：</p>
<ol>
<li>zookeeper伪集群部署：<a href="https://my.oschina.net/vbird/blog/384043" target="_blank" rel="external">https://my.oschina.net/vbird/blog/384043</a></li>
<li>zookeeper具体配置详解：<a href="http://www.cnblogs.com/shangxiaofei/p/5210917.html" target="_blank" rel="external">http://www.cnblogs.com/shangxiaofei/p/5210917.html</a></li>
<li>zookeeper运维经验：<a href="http://mp.weixin.qq.com/s?__biz=MzAxMjQ5NDM1Mg==&amp;mid=2651024176&amp;idx=1&amp;sn=7659ea6a7bf5c37b083e30060c3e55ca&amp;chksm=8047384fb730b1591ff1ce7081822577112087fc7ec3976f020a263b503f6a8ef0856b3a3057&amp;scene=0#wechat_redirect" target="_blank" rel="external">http://mp.weixin.qq.com/s?__biz=MzAxMjQ5NDM1Mg==&amp;mid=2651024176&amp;idx=1&amp;sn=7659ea6a7bf5c37b083e30060c3e55ca&amp;chksm=8047384fb730b1591ff1ce7081822577112087fc7ec3976f020a263b503f6a8ef0856b3a3057&amp;scene=0#wechat_redirect</a></li>
<li>dubbo编译失败问题处理：<a href="http://www.jianshu.com/p/f4996b1ccf2f，因本机jdk未重装前为jdk8，即时使用jenv切换环境也无效，后干脆重装jdk" target="_blank" rel="external">http://www.jianshu.com/p/f4996b1ccf2f，因本机jdk未重装前为jdk8，即时使用jenv切换环境也无效，后干脆重装jdk</a></li>
<li>git关联远程仓库请使用：git push -u origin master，否则会导致关联失败，问题处理参：<a href="http://stackoverflow.com/questions/24114676/git-error-failed-to-push-some-refs-to" target="_blank" rel="external">http://stackoverflow.com/questions/24114676/git-error-failed-to-push-some-refs-to</a></li>
<li>git无法上传空目录，确实不支持，先前不知：<a href="http://www.cnblogs.com/softidea/p/5579668.html" target="_blank" rel="external">http://www.cnblogs.com/softidea/p/5579668.html</a></li>
<li>cat编译参：<a href="http://www.cnblogs.com/yjmyzz/archive/2016/03/30/dianping-cat-deploy-tutorial.html" target="_blank" rel="external">http://www.cnblogs.com/yjmyzz/archive/2016/03/30/dianping-cat-deploy-tutorial.html</a></li>
<li>cat部署因多写了server.xml多写了http：<a href="https://www.oschina.net/question/584441_2203579" target="_blank" rel="external">https://www.oschina.net/question/584441_2203579</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/16/Dubbo+Cat分布式服务搭建/" data-id="civxyoe0c0004thuyzo8lfzhi" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基础设施/">基础设施</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-BQConf-24见闻" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/07/BQConf-24见闻/" class="article-date">
  <time datetime="2016-11-07T13:35:11.000Z" itemprop="datePublished">2016-11-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/07/BQConf-24见闻/">BQConf-24见闻</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>时间：2016-11-05 13:00~17:00</li>
<li>地点：成都</li>
<li>举办方：Thoughtworks</li>
</ul>
<p>一直很好奇，大厂是如何测试的。刚来成都，也好熟悉下周围环境，报名参加了Thoughtworks举办的这个活动，发现活动挺好，推荐以后大家如条件允许，也积极参加。具体活动PPT后续可以在BQConf检索到。有以下几点感受：</p>
<ol>
<li>大牛级的测试，“测试工程师“开发水平不亚于”开发工程师“</li>
<li>即关心当下的测试状况，也关注未来发展</li>
<li>软件质量的提高是件系统性工程，讲究方法论</li>
<li>落实到生产中，具体实施是有两种方式落地：a.关怀，b.制度（推崇制度），有制度就要落实</li>
<li>自动化测试很重要，解放重复劳动，具体衡量”自动化“与”手工测试“收益，来确定是否自动化</li>
<li>有时候并非无法实现，而是实施的复杂度较高，如何降低复杂度，提高效率体现水平的高低</li>
<li>美女测试推荐了一个好的跨平台自动测试化工具：Gauge</li>
</ol>
<h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><p>参考网站：</p>
<ol>
<li>Gauge：<a href="http://getgauge.io/" target="_blank" rel="external">http://getgauge.io/</a></li>
<li>BQConf：<a href="http://www.bqconf.com/" target="_blank" rel="external">http://www.bqconf.com/</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/07/BQConf-24见闻/" data-id="civxyoe010000thuyl9lxdemp" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-博客诞生记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/06/博客诞生记/" class="article-date">
  <time datetime="2016-11-06T09:48:58.000Z" itemprop="datePublished">2016-11-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/06/博客诞生记/">博客诞生记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>博客搭建步骤：</p>
<ol>
<li>node安装：请下载6.0以下的node版本：<ul>
<li><a href="https://nodejs.org/dist/v5.5.0/" target="_blank" rel="external">https://nodejs.org/dist/v5.5.0/</a></li>
</ul>
</li>
<li>修改npm相关文件所有者：<ul>
<li>sudo chown -R $(whoami) $(npm config get prefix)/{lib/node_modules,bin,share}    </li>
</ul>
</li>
<li>安装node npm源管理工具，并切换到taobao<ul>
<li>npm install -g nrm</li>
<li>nrm use taobao</li>
</ul>
</li>
<li>单独安装：dtrace-provider，避免后续下载卡主，参问题处理一<ul>
<li>npm install -g dtrace-provider</li>
</ul>
</li>
<li>安装 hexo-cli 并安装博客后，再安装npm，然后启动，本地访问：<a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a><ul>
<li>npm install hexo-cli -g</li>
<li>hexo init blog</li>
<li>cd blog</li>
<li>npm install</li>
<li>hexo server </li>
</ul>
</li>
<li>如果遇到DTraceProviderBindings MODULE_NOT_FOUND错误，参问题处理二</li>
<li>gitHub上创建仓库：xxx.github.io，其中xxx为github账户</li>
<li>安装hexo-deployer-git：<ul>
<li>npm install hexo-deployer-git –save</li>
</ul>
</li>
<li>修改本地_config.yml中的deploy：<ul>
<li>deploy:<ul>
<li>type: git</li>
<li>repo: git@github.com:xxx/xxx.github.io.git</li>
<li>branch: master</li>
<li>message: 博客提交</li>
</ul>
</li>
</ul>
</li>
<li>创建博客：博客诞生记<ul>
<li>hexo new 博客诞生记</li>
</ul>
</li>
<li>生成静态文件：<ul>
<li>hexo generate</li>
</ul>
</li>
<li>发布到github：<ul>
<li>hexo deploy</li>
</ul>
</li>
<li>在github上进行外网访问：<ul>
<li><a href="https://xxx.github.io/" target="_blank" rel="external">https://xxx.github.io/</a></li>
</ul>
</li>
</ol>
<p>以上部分问题的处理,感谢泉兄的协助…</p>
<p>参考网站:    </p>
<ol>
<li>hexo官网：<a href="https://hexo.io/zh-cn/" target="_blank" rel="external">https://hexo.io/zh-cn/</a></li>
<li>node下载地址：<a href="https://nodejs.org/dist/v5.5.0/" target="_blank" rel="external">https://nodejs.org/dist/v5.5.0/</a></li>
<li>问题处理一：<a href="http://zhuscat.com/2016/07/21/solve-hexo-problems/" target="_blank" rel="external">http://zhuscat.com/2016/07/21/solve-hexo-problems/</a></li>
<li>问题处理二：<a href="http://www.cnblogs.com/vinozly/p/5817255.html" target="_blank" rel="external">http://www.cnblogs.com/vinozly/p/5817255.html</a></li>
<li>markdown语法：<a href="http://daringfireball.net/projects/markdown/syntax" target="_blank" rel="external">http://daringfireball.net/projects/markdown/syntax</a></li>
<li>泉兄博客地址：<a href="http://goldymark.coding.me/" target="_blank" rel="external">http://goldymark.coding.me/</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/06/博客诞生记/" data-id="civxyoe050001thuyd8jakl72" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/06/hello-world/" class="article-date">
  <time datetime="2016-11-05T16:13:19.000Z" itemprop="datePublished">2016-11-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/06/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/06/hello-world/" data-id="civxyoe080002thuyg42o4tng" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础设施/">基础设施</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/基础设施/" style="font-size: 10px;">基础设施</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/25/项目Git-Maven化总结/">项目Git+Maven化总结</a>
          </li>
        
          <li>
            <a href="/2016/11/16/Dubbo+Cat分布式服务搭建/">Dubbo+Cat分布式服务搭建</a>
          </li>
        
          <li>
            <a href="/2016/11/07/BQConf-24见闻/">BQConf-24见闻</a>
          </li>
        
          <li>
            <a href="/2016/11/06/博客诞生记/">博客诞生记</a>
          </li>
        
          <li>
            <a href="/2016/11/06/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 工匠<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>